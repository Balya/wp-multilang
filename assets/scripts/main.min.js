(function(a){a(function(){a(document).on("click",".delete-language",function(){var b=a(this);if(confirm(wpm_params.confirm_question)){var c={action:"wpm_delete_lang",language:b.data("language"),security:wpm_params.delete_lang_nonce};a.ajax({url:wpm_params.ajax_url,type:"post",data:c,dataType:"json",complete:function(){b.parent().parent().fadeOut("slow",function(){a(this).remove()})},error:function(f,d,e){alert(e+"\r\n"+f.statusText+"\r\n"+f.responseText)}})}});a("#wpm-languages tbody").sortable({handle:"td:first-child"});a(document).on("change",".wpm-flags",function(){var b=a(this);if(b.val()){var c=wpm_params.flags_dir+b.val();if(b.next().length){b.next().attr("src",c)}else{b.parent().append('<img src="'+c+'">')}}else{b.next().remove()}});a("#WPLANG").parents("tr").hide();a("#add_lang").click(function(){var c=wp.template("wpm-add-lang");var b=a("#wpm-available-translations").val();if(!b){return false}var d=wpm_params.available_translations[b];if(typeof d==="undefined"){d={language:"",native_name:"",iso:{0:""}}}d.count=wpm_lang_count;a("#wpm-languages tbody").append(c(d)).sortable({handle:"td:first-child"});a('[name="wpm_languages['+wpm_lang_count+'][flag]"]').val(d.iso[Object.keys(d.iso)[0]]).trigger("change");a("#wpm-available-translations").val("");wpm_lang_count++})})}(jQuery));