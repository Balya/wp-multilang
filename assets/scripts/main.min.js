(function(a){a(function(){a(document).on("click",".delete-language",function(){var b=a(this);if(confirm(wpm_params.confirm_question)){var c={action:"wpm_delete_lang",language:b.data("language"),security:wpm_params.delete_lang_nonce};a.ajax({url:wpm_params.ajax_url,type:"post",data:c,dataType:"json",complete:function(){b.parent().parents(".postbox").fadeOut("slow",function(){a(this).remove();a(".language-order").each(function(d){a(this).text(d+1)});wpm_lang_count--})},error:function(f,d,e){alert(e+"\r\n"+f.statusText+"\r\n"+f.responseText)}})}});a("#wpm-languages").sortable({update:function(){a(".language-order").each(function(b){a(this).text(b+1)})}});a(document).on("change",".wpm-flags",function(){var b=a(this);if(b.val()){var c=wpm_params.flags_dir+b.val();if(b.next().length){b.next().attr("src",c)}else{b.parent().append('<img src="'+c+'">')}}else{b.next().remove()}});a("#add_lang").click(function(){var b=wp.template("wpm-add-lang");var c={count:wpm_lang_count};a("#wpm-languages").append(b(c));wpm_lang_count++});a(document).on("click",".handlediv",function(){a(this).parent().toggleClass("closed")});a(document).on("keypress, keyup",'.postbox input[name$="[name]"]',function(){var b=a(this).val();a(this).parents(".postbox").find("h2 .language-order+span").text(b)});a("#wpm_installed_translations").change(function(){if(a(this).val()){a("#delete_translation").prop("disabled",false)}else{a("#delete_translation").prop("disabled",true)}});a("#wpm_installed_translations").trigger("change");a("#delete_translation").click(function(){if(confirm(wpm_params.confirm_question)){var b=a("#wpm_installed_translations").val();var c={action:"wpm_delete_translation",locale:b,security:wpm_params.delete_translation_nonce};a.ajax({url:wpm_params.ajax_url,type:"post",data:c,dataType:"json",success:function(){a('#wpm_installed_translations option[value="'+b+'"]').remove();a("#wpm_installed_translations").trigger("change")},error:function(f,d,e){alert(e+"\r\n"+f.statusText+"\r\n"+f.responseText)}})}})})}(jQuery));